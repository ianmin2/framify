
<div>
    <center>
        <h1>@Framify</h1>
    </center>
    <br>
    <br>
    <br>    
    Welcome to Framify,
    <br><br>
    The Framify framework is built upon the <code>bixbyte-frame</code> framework ( a back end development framework for the nodejs runtime )
    and <code>framify.js</code> ( an Angular 1X UI agnostic platform for eased interaction with the bixbyte-frame platform).

    <div class="section">       
        The Angular Module to be included in your application is <code>framify.js</code>
        <br>    
        It depends on <code>ui.router ,framify-paginate ,ngStorage ,jsonForatter ,chart.js ,ngAria ,ngMaterial and ngMessages</code> all of which can be found in the <code>framify_dependencies.js</code> or <code>framify_bundled.js</code> files of the <code>framify.js</code> package.
    </div>

<!-- SO - APP SERVICE -->
<div ng-if="false">

     <!--App Service-->
    <hr>
    <div class="section">
        <u><h3>The <i style="color:red;">app</i> service</h3></u>
    </div>


    <!--scheme-->
    <hr> 
    <div class="section">   
        <u>
            <h5 style="color:gray">app.scheme</h5>
        </u>
        This is a reference to access scheme that the application is utilizing.
        <pre style="max-width:300px;">&#123; &#123; app.scheme &#125; &#125;</pre>
        Currently <code>{{app.scheme}}</code>
    </div>
          
    <!--ip-->
    <hr> 
    <div class="section">   
        <u>
            <h5 style="color:gray">app.ip</h5>
        </u>
        This is a reference to the ip or server_name that the application is being accesssed on.
        <pre style="max-width:300px;">&#123; &#123; app.ip &#125; &#125;</pre>
        <br>Currently <code>{{app.ip}}</code>
    </div>

    <!--port-->
    <hr>
    <div class="section">   
        <u>
            <h5 style="color:gray">app.port</h5>
        </u>
        This is a reference to the port that the application is being accessed through.
        <pre style="max-width:300px;">&#123; &#123; app.port &#125; &#125;</pre>
        <br>Currently <code>{{app.port || 'default (80)'}}</code>
    </div>

    <!--hlink/url-->
    <hr>
    <div class="section">   
        <u>
            <h5 style="color:gray">app.hlink / app.url </h5>
        </u>
        This is a reference to the root url of the application.
        <pre style="max-width:300px;">&#123; &#123; app.hlink &#125; &#125; or &#123; &#123; app.url &#125; &#125;</pre>
        <br>Currently <code>{{app.hlink}}</code>
    </div>


    <!--nav-->
    <hr>
    <div class="section">   
        <u>
            <h5 style="color:gray">app.nav</h5>
        </u>
        This is a reference to the application's main navigation object.
        <pre style="max-width:300px;">&#123; &#123; app.nav &#125; &#125;</pre>
        <br>Currently <json-formatter open=0 json="app.nav"></json-formatter>
    </div>

    <!--redirect-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u> app.redirect</u> <i>(Function (http_location) )</i>
        </h5>
        
        This performs a plain http redirect by updating the global <code>window.location</code> reference.
        <pre style="max-width:300px;">&#123; &#123; app.redirect( http_path ) &#125; &#125;</pre>
        <br>Example: <code>app.redirect('https://google.com')</code> will redirect you to google's homepage at <i>https://google.com</i>.
        <br><button class="md-btn md-btn-primary" ng-click="app.redirect('https://google.com')">Redirect to Google</button>
    </div>

   <!--setVar-->
   <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u> app.setVar</u> <i>(Function (object_name ,key_to_add ,value_to_add) )</i>
        </h5>
        
        Adds a key value pair to a JSON object or returns a new one where none exists.
        <br>Example <br>
        With an object <code> var people = {} </code>
        <br> To set add a new value 'John' with the value <code>{ "name": "John Doe", "age":20 }</code>
        ,Run <pre style="max-width:600px;">&#123; &#123; people = app.setVar(people, 'John', { "name": "John Doe", "age":20 } ) &#125; &#125;</pre>
        Giving the resultant object <pre style="max-width:600px;"> <json-formatter open=0 ng-if="data.sample_setVar" json="data.sample_setVar" ></json-formatter> </pre>
        <span hidden> {{ data.sample_setVar =  app.setVar(people, 'John', { "name": "John Doe", "age":20 } ) }} </span>
        
    </div>

    <!--str-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u> app.str</u> <i>(Function (json_encoded_object) )</i>
        </h5>
        
        Transforms a viable JSON object into a string.
        <br>To transform the JSON object <code>{ name: { first: 'John', last: 'Doe' }, age: 1000 }</code>, run
        <pre style="max-width:600px;">&#123; &#123; app.str( { name: { first: 'John', last: 'Doe' }, age: 1000 } ) &#125; &#125;</pre>
        <br>which outputs <i><code>'{{app.str({ name: { first: 'John', last: 'Doe' }, age: 1000 })}}'</code></i>.
    </div>

    <!--json-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u> app.json</u> <i>(Function (stringified_json_object) )</i>
        </h5>
        
        Transforms a viable string into an accessible JSON object.
        <br>To transform the string <code>'{"name":{"first":"John","last":"Doe"},"age":1000}'</code>, run
        <pre style="max-width:600px;">&#123; &#123; app.json('{"name":{"first":"John","last":"Doe"},"age":1000}') &#125; &#125;</pre>
        <br>which outputs <pre style="max-width:600px;"> <json-formatter  open=0 ng-if="data.sample_json" json="data.sample_json"></json-formatter> </pre>
        <span hidden> {{ data.sample_json =  app.json('{"name":{"first":"John","last":"Doe"},"age":1000}') }} </span>
    </div>

    <!--md5-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u> app.md5</u> <i>(Function (object_to_encode) )</i>
        </h5>
        
        Outputs an MD5 hash of the provided argument.
        <br>To <b>MD5</b> the value <code>'framify'</code>, run
        <pre style="max-width:600px;">&#123; &#123; app.md5( 'framify' ) &#125; &#125;</pre>
        <br>which outputs <i><code>{{app.md5('framify')}}</code></i>.
    </div>

    <!--base64_encode-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u> app.base64_encode</u> <i>(Function (object_to_encode) )</i>
        </h5>
        
        Outputs a base64 encoded string of the provided argument.
        <br>To <b>base64 encode </b> the value <code>'framify'</code>, run
        <pre style="max-width:600px;">&#123; &#123; app.base64_encode( 'framify' ) &#125; &#125;</pre>
        <br>which outputs <i><code>{{app.base64_encode('framify')}}</code></i>.
    </div>

    <!--base64_decode-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u> app.base64_decode</u> <i>(Function (base64_encoded_object_to_decode) )</i>
        </h5>
        
        Outputs a base64 decode string of the provided base64 encoded string.
        <br>To <b>base64 encode </b> the value <code>'ZnJhbWlmeQ=='</code>, run
        <pre style="max-width:600px;">&#123; &#123; app.base64_decode( 'ZnJhbWlmeQ==' ) &#125; &#125;</pre>
        <br>which outputs <i><code>{{app.base64_decode('ZnJhbWlmeQ==')}}</code></i>.
    </div>

    <!--upload-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u> app.upload</u> <i>(Function (file_data,upload_handler_location) )</i>
        </h5>
        
        This performs a basic file upload using <code>Angular JS' $http.post</code> method.
        <br><i>It is therefore advisable to use the inbuilt <b>'fileModel'</b> directive when using this method.</i>
        <pre style="max-width:600px;">&#123; &#123; app.upload( { file_reference_object, 'minutes'  } ) &#125; &#125;</pre>
        <br>Example: <code>app.upload( file_reference_object, 'minutes')</code> will upload the referenced file object to the <i><b>upload/minutes</b></i> route for processing.
    </div>

    <!--keys-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u> app.keys</u> <i>(Function (json_object) )</i>
        </h5>
        
        Outputs an Array containing all of the provided objects' <b>first level</b> keys.
        <br>To <b>obtain the keys </b> of the object <code>{ name: { first: 'John', last: 'Doe' }, age: 1000 })</code>, run
        <pre style="max-width:600px;">&#123; &#123; app.keys( { name: { first: 'John', last: 'Doe' }, age: 1000 }) ) &#125; &#125;</pre>
         <br>which outputs <pre style="max-width:600px;"> <json-formatter open=0 ng-if="data.sample_keys" json="data.sample_keys" ></json-formatter> </pre>
        <span hidden> {{ data.sample_keys =  app.keys({ name: { first: 'John', last: 'Doe' }, age: 1000 }) }} </span>
    </div>

    <!--vals-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u> app.vals</u> <i>(Function (json_object) )</i>
        </h5>
        
        Outputs an Array containing all of the provided objects' <b>first level</b> values.
        <br>To <b>obtain the values </b> of the object <code>{ name: { first: 'John', last: 'Doe' }, age: 1000 }</code>, run
        <pre style="max-width:600px;">&#123; &#123; app.vals( { name: { first: 'John', last: 'Doe' }, age: 1000 }) ) &#125; &#125;</pre>
         <br>which outputs <pre style="max-width:600px;"> <json-formatter open=0 ng-if="data.sample_vals" json="data.sample_vals"></json-formatter> </pre>
        <span hidden> {{ data.sample_vals =  app.vals({ name: { first: 'John', last: 'Doe' }, age: 1000 }) }} </span>
    </div>

    <!--parseInt-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u> app.parseInt</u> <i>(Function (str_to_parse) )</i>
        </h5>
        
        <br>Parses a String value into an integer.
        <br>To <b>parseInt</b> a String  <i><b>'1234'</b></i>, run
        <pre style="max-width:600px;">&#123; &#123; app.parseInt( '1234' ) &#125; &#125;</pre>
        <br>which returns <i><code>{{app.parseInt( '1234' )}}</code></i>.
    </div>

    <!--doNothing-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u> app.doNothing</u> <i>(Promise () )</i>
        </h5>
        
        <br>A placeholder promise to do absolutely nothing. 
        <br><i>Sometimes you just to do nothing and yet the application screams for something. <b>This is to silence it</b></i>
        <pre style="max-width:600px;">&#123; &#123; app.doNothing( ) &#125; &#125;</pre>
        can be chained with a <i><code>.then</code></i> or <i><code>.catch</code></i> e.g.
        <pre style="max-width:600px;">&#123; &#123; app.doNothing( ).then(app.doNothing).catch(app.doNothing) &#125; &#125;</pre>
    </div>

    <!--getNumbers-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u> app.getNumbers</u> <i>(Function (str_to_analyse) )</i>
        </h5>
        
        <br>Extracts the first consecutive array of number(s) from a String.
        <br>To <b>getNumbers</b> from a String  <i><b>'BabyDimples1234'</b></i>, run
        <pre style="max-width:600px;">&#123; &#123; app.getNumbers('BabyDimples1234' ) &#125; &#125;</pre>
        <br>which returns <i><code>{{app.getNumbers( 'BabyDimples1234' )}}</code></i>.
    </div>

    <!--notify-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u> app.notify</u> <i>(Promise (message ,bootstrap_class ,timeout, position) )</i>
        </h5>
        
        <br>Simple UIKit based notification. 
        <br><i>Defaults
        <br><b>message</b></i>: <code>'A blank notification was triggered.'</code>
        <br><b>bootstrap_class</b></i>: <code>info</code> <b>[<font color="blue">info</font> ,<font color="green">success</font> ,<font color="gray">primary</font> ,<font color="orange">warning</font> ,<font color="red">danger</font> ]</b>
        <br><b>timeout</b></i>: <code>6000</code> 
        <br><b>position</b></i>: <code>'top-center'</code> <b>[top-left ,top-center ,top-right ,bottom-left ,bottom-center ,bottom-right]</b>
        <pre style="max-width:600px;">&#123; &#123; app.notify( ) &#125; &#125;</pre>
        Example
        <pre style="max-width:900px;">&lt;button class="md-btn md-btn-primary" ng-click="app.notify('Welcome to Framify').catch(app.doNothing)"&gt; Notify &lt;/button&gt;</pre>
        <button class="md-btn md-btn-primary" ng-click="app.notify('Welcome to Framify').catch(app.doNothing)">Notify</button>
    </div>
    

    <!--countries-->
    <hr>
    <div class="section">   
        <u>
            <h5 style="color:gray">app.countries</h5>
        </u>
        Outputs an Array of alphabetically ordered 240 country objects in the format <code>{ name: "x", value: 'y' }</code> <i>(Ideal for use in select elements)</i>.
        <pre style="max-width:300px;">&#123; &#123; app.countries &#125; &#125;</pre>
        <br>Currently <json-formatter json="app.countries" open="0"></json-formatter>
    </div>

    <!--makeResponse-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u>app.makeResponse</u> / <u> app.make_response</u> <i>(Function (response_code,message,command) )</i>
        </h5>
        
        Outputs a standard framify JSON response object.
        <br>To give a standard framify <i>Unauthorized</i> response, <code>{ response: 401, data: { message: "Unauthorized", command: "retry" } }</code>, run
        <pre style="max-width:600px;">&#123; &#123; app.makeResponse(401,'Unauthorized','retry') &#125; &#125;</pre>
        <br>which outputs <pre style="max-width:600px;"> <json-formatter open=0 ng-if="data.sample_makeresponse" json="data.sample_makeresponse"></json-formatter> </pre>
        <span hidden> {{ data.sample_makeresponse =  app.makeResponse(401,'Unauthorized','retry') }} </span>
    </div>

    <!--date-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u> app.date</u> <i>(Function () )</i>
        </h5>
        
        Outputs the complete current Date Object.
        <br>To output the <b>current date object</b>, run
        <pre style="max-width:600px;">&#123; &#123; app.date( ) &#125; &#125;</pre>
        <br>which outputs <i><code>{{app.date()}}</code></i>.
    </div>

    <!--newDate-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u> app.newDate</u> <i>(Function () )</i>
        </h5>
        
        Outputs the complete current Date String.
        <br>To output the <b>current date string</b>, run
        <pre style="max-width:600px;">&#123; &#123; app.newDate( ) &#125; &#125;</pre>
        <br>which outputs <i><code>{{app.newDate()}}</code></i>.
    </div>

    <!--isoDate-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u> app.isoDate</u> <i>(Function () )</i>
        </h5>
        
        Outputs the complete current Date in <i><b>ISO</b></i> format.
        <br>To output the <b>current date</b>, run
        <pre style="max-width:600px;">&#123; &#123; app.isoDate( ) &#125; &#125;</pre>
        <br>which outputs <i><code>{{app.isoDate()}}</code></i>.
    </div>

    <!--getIsoDate-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u> app.getIsoDate</u>  <i>(Function (date_string) )</i>
        </h5>
        
        Converts a date string to <b><i>ISO</i></b> format.
        <br>To output the <b>current date</b> <code>{{app.newDate()}}</code> into <i>ISO</i> format, run
        <pre style="max-width:600px;">&#123; &#123; app.getIsoDate( {{ app.newDate() }}  ) &#125; &#125;</pre>
        <br>which outputs <i><code>{{app.getIsoDate( app.newDate() )}}</code></i>.
    </div>

    <!--toIsoDate-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u> app.toIsoDate</u>  <i>(Function (date_object) )</i>
        </h5>
        
        Converts a date object to <b><i>ISO</i></b> format.
        <br>To output a <b>date object</b> <code>{{app.date()}}</code> into <i>ISO</i> format, run
        <pre style="max-width:600px;">&#123; &#123; app.toIsoDate( {{app.date()}} ) &#125; &#125;</pre>
        which outputs <i><code> {{ app.toIsoDate( app.date() ) }} </code></i>
    </div>

    <!--dateTime-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u> app.dateTime</u> <i>(Function () )</i>
        </h5>
        
        Outputs the complete current Date in <i><b>dd-mm-yyyy hh:mm</b></i> format.
        <br>To output the <b>current date</b>, run
        <pre style="max-width:600px;">&#123; &#123; app.dateTime( ) &#125; &#125;</pre>
        <br>which outputs <i><code>{{app.dateTime()}}</code></i>.
    </div>

    <!--getDateTime-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u> app.getDateTime</u> <i>(Function (date_string) )</i>
        </h5>
        
        Outputs the provided date String in <i><b>dd-mm-yyyy hh:mm</b></i> format.
        <br>To output the <b>current date</b> <code>{{app.newDate()}}</code> in <i>date-time</i> format, run
        <pre style="max-width:600px;">&#123; &#123; app.getDateTime( {{app.newDate()}}  ) &#125; &#125;</pre>
        <br>which outputs <i><code>{{app.getDateTime( app.newDate() )}}</code></i>.
    </div>


    <!--toDateTime-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u> app.toDateTime</u>  <i>(Function (date_object) )</i>
        </h5>
        
        Converts a date object to <b><i>dd-mm-yyyy hh:mm</i></b> format.
        <br>To output a <b>date object</b> <code>{{app.date()}}</code> into <i>ISO</i> format, run
        <pre style="max-width:600px;">&#123; &#123; app.toDateTime( {{app.date()}} ) &#125; &#125;</pre>
        which outputs <i><code> {{ app.toDateTime( app.date() ) }} </code></i>
    </div>

    <!--monthNum-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u> app.monthNum</u> <i>(Function () )</i>
        </h5>
        
        Outputs the current month number in.
        <br>To output the <b>current month number</b>, run
        <pre style="max-width:600px;">&#123; &#123; app.monthNum( ) &#125; &#125;</pre>
        <br>which outputs <i><code>{{app.monthNum()}}</code></i>.
    </div>

    <!--getMonthNum-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u> app.getMonthNum</u> <i>(Function (date_string) )</i>
        </h5>
        
        Outputs the provided date String in <i><b>mm</b></i> format.
        <br>To output the <b>current date</b> <code>{{app.newDate()}}</code> in <i>month-number</i> format, run
        <pre style="max-width:600px;">&#123; &#123; app.getMonthNum( {{app.newDate()}}  ) &#125; &#125;</pre>
        <br>which outputs <i><code>{{app.getMonthNum( app.newDate() )}}</code></i>.
    </div>

    <!--toMonthNum-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u> app.toMonthNum</u>  <i>(Function (date_object) )</i>
        </h5>
        
        Converts a date object to <b><i>mm</i></b> format.
        <br>To convert a <b>date object</b> <code>{{app.date()}}</code> into <i>month-number</i> format, run
        <pre style="max-width:600px;">&#123; &#123; app.toMonthNum( {{app.date()}} ) &#125; &#125;</pre>
        which outputs <i><code> {{ app.toMonthNum( app.date() ) }} </code></i>
    </div>


     <!--month_array-->
    <hr>
    <div class="section">   
        <u>
            <h5 style="color:gray">app.month_array</h5>
        </u>
        This is a reference to a zero indexed month array.
        <pre style="max-width:300px;">&#123; &#123; app.month_array &#125; &#125;</pre>
        <br>Returns <json-formatter open=0 json="app.month_array"></json-formatter>
    </div>

    <!--month_o_array-->
    <hr>
    <div class="section">   
        <u>
            <h5 style="color:gray">app.month_o_array</h5>
        </u>
        This is a reference to a month object array in the format <code>[{id: "", name: ""}]</code>.
        <br> <i>It is ideal for use in select lists.</i>
        <pre style="max-width:300px;">&#123; &#123; app.month_o_array &#125; &#125;</pre>
        <br>Returns <json-formatter open=0 json="app.month_o_array"></json-formatter>
    </div>

    <!--ajax-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u>app.ajax</u> / <u>app.cgi</u> <i>(Promise (http_method, target_url, data) )</i>
        </h5>
        Returns a jQuery then-able after performing a http request guided by the provided parameters.
        <br>To make an http <i>POST</i> request to <i><b>{{remoteAuth.url}}/echo</b></i> where the parameters are <i><b>user=framify@bixbyte.io</b></i> and <i><b>status=200</b></i>, run
        <pre style="max-width:1000px;">&#123; &#123; app.ajax('GET','{{remoteAuth.url}}/echo',{ user: 'framify@bixbyte.io'  , status : 200 }).then(app.handler).catch(app.handler) &#125; &#125;</pre>
        <button 
            class="md-btn md-btn-primary" 
            ng-click="app.ajax('POST',remoteAuth.url+'/echo',{ user: 'framify@bixbyte.io'  , status : 200 }).then(app.handler).catch(app.handler)"
        >MAKE AN APP.AJAX REQUEST</button>
    </div>

    <!--getJson-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u>app.getJSON</u> / <u>app.get_json</u> <i>(Promise (http_method, target_url, data) )</i>
        </h5>
        Returns a jQuery then-able after performing a http getJSON request guided by the provided parameters.
        <br>To make a request to github's API at <i><b>https://api.github.com/users/ianmin2</b></i>, run
        <pre style="max-width:800px;">&#123; &#123; app.getJSON('https://api.github.com/users/ianmin2').then(app.remote_handler).catch(app.remote_handler) &#125; &#125;</pre>
        <button 
            class="md-btn md-btn-primary" 
            ng-click="app.getJSON('https://api.github.com/users/ianmin2').then(app.remote_handler).catch(app.remote_handler)"
        >MAKE AN APP.GETJSON REQUEST</button>
    </div>

    <!--loadify-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u>app.loadify</u> <i>(Promise (timeout_duration_in_ms, message) )</i>
        </h5>
        Blocks the UI for the specified amount of time while displaying the specified message.
        <br><code><i>If no timeout duration is specified, </i> the promise returns an instance the resultant<i>modal element</i> ready for a custom <i><b>.hide()</b></i></code>
        <br>To show the loadify modal saying <i><b>Performing Task</b></i> for  <i><b>4000ms</b></i>, run
        <pre style="max-width:600px;">&#123; &#123; app.loadify(4000,'Performing task') &#125; &#125;</pre>
        <button 
            class="md-btn md-btn-primary" 
            ng-click="app.loadify(4000,'Performing task')"
        >LOADIFY</button>
    </div>

    <!--alert-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u>app.alert</u> <i>(Promise (title, message, callback) )</i>
        </h5>
        Displays a custom modal bearing the specified title and message.
        <br><code><i>If a callback function is passed, the </i>message<i> parameter is </i> passed to it.</code>
        <br>To show the alert modal titled  <i><b>Sample Alert</b></i> bearing the message  <i><b>You are connected to framify on {{app.hlink}}.</b></i>, run
        <pre style="max-width:800px;">&#123; &#123; app.alert('Sample Alert','You are connected to framify on {{app.hlink}}') &#125; &#125;</pre>
        <button 
            class="md-btn md-btn-primary" 
            ng-click=" app.alert('Sample Alert','You are connected to framify on ' + app.hlink )"
        >alert</button>
    </div>

    <!--confirm-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u>app.confirm</u> <i>(Promise (title, message, callback) )</i>
        </h5>
        Displays a custom confirmation modal bearing the specified title and message.
        <br><code><i>If a callback function is passed, the </i>message<i> parameter is </i> passed to it.</code>
        <br>To show the confirm modal titled  <i><b>Sample confirm</b></i> bearing the message  <i><b>Make a donation for the Framify Application at {{app.hlink}}.</b></i>, run
        <pre style="max-width:800px;">&#123; &#123; app.confirm('Sample confirm','Make a donation for the Framify Application at {{app.hlink}}') &#125; &#125;</pre>
        <button 
            class="md-btn md-btn-primary" 
            ng-click=" app.confirm('Sample confirm','Make a donation for the Framify Application at ' + app.hlink )"
        >confirm</button>
    </div>

    <!--prompt-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u>app.prompt</u> <i>(Promise (title ,label ,placeholder ,callback) )</i>
        </h5>
        Displays a custom promptation modal bearing the specified title and message.
        <br><code><i>If a callback function is passed, the </i>message<i> parameter is </i> passed to it.</code>
        <br>To show the prompt modal titled  <i><b>What site are you currently on?</b></i> with the label <i><b>Website:</b></i> and the placeholder <i><b>{{app.hlink}}</b></i>, run
        <pre style="max-width:800px;">&#123; &#123; app.prompt('What site are you currently on?','Website','{{app.hlink}}') &#125; &#125;</pre>
        <button 
            class="md-btn md-btn-primary" 
            ng-click=" app.prompt('What site are you currently on?','Website:', app.hlink )"
        >prompt</button>
    </div>

    <!--isemail-->
    <hr> 
    <div class="section">   
        <u>
            <h5 style="color:gray">app.isemail</h5>
        </u>
        Returns an Ecmascript RegEx pattern to validate email addresses.
        <pre style="max-width:300px;">&#123; &#123; app.isemail &#125; &#125;</pre>
        <!--Currently <code>{{ app.isemail }}</code>-->
    </div>

    <!--isEmail-->
    <hr> 
    <div class="section">   
         <h5 style="color:gray">
                <u>app.isEmail</u> <i>(Function (text_toValidate) )</i>
        </h5>
        Returns a boolean value after evaluating whether or not a given text is a valid email address; Usage:
        <pre style="max-width:400px;">&#123; &#123; app.isEmail( 'framify@bixbyte.io' ) &#125; &#125;</pre>
        Returns <code>{{ app.isEmail( 'framify@bixbyte.io' ) }}</code>
    </div>

    <!--isusername-->
    <hr> 
    <div class="section">   
        <u>
            <h5 style="color:gray">app.isusername</h5>
        </u>
        Returns an Ecmascript RegEx pattern to validate a username.
        <pre style="max-width:300px;">&#123; &#123; app.isusername &#125; &#125;</pre>
        <!--Currently <code>{{app.isusername}}</code>-->
    </div>

    <!--isUsername-->
    <hr> 
    <div class="section">   
         <h5 style="color:gray">
                <u>app.isUsername</u> <i>(Function (text_toValidate) )</i>
        </h5>
        Returns a boolean value after evaluating whether or not a given text is a valid username; Usage:
        <pre style="max-width:400px;">&#123; &#123; app.isUsername( 'framify' ) &#125; &#125;</pre>
        Returns <code>{{ app.isUsername( 'framify' ) }}</code>
    </div>

    <!--ispassword-->
    <hr> 
    <div class="section">   
        <u>
            <h5 style="color:gray">app.ispassword</h5>
        </u>
        Returns an Ecmascript RegEx pattern to validate a password.
        <pre style="max-width:300px;">&#123; &#123; app.ispassword &#125; &#125;</pre>
        <!--Currently <code>{{app.ispassword}}</code>-->
    </div>

    <!--isPassword-->
    <hr> 
    <div class="section">   
         <h5 style="color:gray">
                <u>app.isPassword</u> <i>(Function (text_toValidate) )</i>
        </h5>
        Returns a boolean value after evaluating whether or not a given text is a valid Password; Usage:
        <pre style="max-width:400px;">&#123; &#123; app.isPassword( 'framify' ) &#125; &#125;</pre>
        Returns <code>{{ app.isPassword( 'framify' ) }}</code>
    </div>

    <!--isnumber-->
    <hr> 
    <div class="section">   
        <u>
            <h5 style="color:gray">app.isnumber</h5>
        </u>
        Returns an Ecmascript RegEx pattern to validate a number.
        <pre style="max-width:300px;">&#123; &#123; app.isnumber &#125; &#125;</pre>
        <!--Currently <code>{{app.isnumber}}</code>-->
    </div>

    <!--isNumber-->
    <hr> 
    <div class="section">   
         <h5 style="color:gray">
                <u>app.isNumber</u> <i>(Function (text_toValidate) )</i>
        </h5>
        Returns a boolean value after evaluating whether or not a given text is a valid Number; Usage:
        <pre style="max-width:400px;">&#123; &#123; app.isNumber( 126157412 ) &#125; &#125;</pre>
        Returns <code>{{ app.isNumber( 126157412 ) }}</code>
    </div>

    <!--istelephone-->
    <hr> 
    <div class="section">   
        <u>
            <h5 style="color:gray">app.istelephone</h5>
        </u>
        Returns an Ecmascript RegEx pattern to validate a telephone.
        <pre style="max-width:300px;">&#123; &#123; app.istelephone &#125; &#125;</pre>
        <!--Currently <code>{{app.istelephone}}</code>-->
    </div>

    <!--isTelephone-->
    <hr> 
    <div class="section">   
         <h5 style="color:gray">
                <u>app.isTelephone</u> <i>(Function (text_toValidate) )</i>
        </h5>
        Returns a boolean value after evaluating whether or not a given text is a valid Telephone; Usage:
        <pre style="max-width:400px;">&#123; &#123; app.isTelephone( '+254701234567' ) &#125; &#125;</pre>
        Returns <code>{{ app.isTelephone( '+254701234567' ) }}</code>
    </div>

    <!--isdateTime-->
    <hr> 
    <div class="section">   
        <u>
            <h5 style="color:gray">app.isdateTime</h5>
        </u>
        Returns an Ecmascript RegEx pattern to validate a date-time value in the format <i><b>DD-MM-YYYY HH:MM e.g 29-02-2013 22:16</b></i>.
        <pre style="max-width:300px;">&#123; &#123; app.isdateTime &#125; &#125;</pre>
        <!--Currently <code>{{app.isdateTime}}</code>-->
    </div>

    <!--isDateTime-->
    <hr> 
    <div class="section">   
         <h5 style="color:gray">
                <u>app.isDateTime</u> <i>(Function (text_toValidate) )</i>
        </h5>
        Returns a boolean value after evaluating whether or not a given text is a valid  date-time value in the format <i><b>DD-MM-YYYY HH:MM</b></i>; Usage:
        <pre style="max-width:400px;">&#123; &#123; app.isDateTime(  {{app.dateTime()}} ) &#125; &#125;</pre>
        Returns <code>{{ app.isDateTime( app.dateTime() ) }}</code>
    </div>

    <!--matches-->
    <hr> 
    <div class="section">   
         <h5 style="color:gray">
                <u>app.matches</u> <i>(Function (value_1,value_2) )</i>
        </h5>
        Returns a boolean value after evaluating whether or not the given parameters are identical to each other. Example:
        <pre style="max-width:600px;">&#123; &#123; app.matches(  {{app.dateTime()}} , {{app.dateTime()}}  ) &#125; &#125;</pre>
        Returns <code>{{ app.matches( app.dateTime() , app.dateTime() ) }}</code>
    </div>

    <!--num2month-->
    <hr> 
    <div class="section">   
         <h5 style="color:gray">
                <u>app.num2month</u> <i>(Function (zero_initiated_month_number) )</i>
        </h5>
        Returns the month name when fed the month number. <i><b>Jan = 0 & Dec = 11</b></i> . Example:
        <pre style="max-width:600px;">&#123; &#123; app.num2month( 1 ) &#125; &#125;</pre>
        Returns <code>{{ app.num2month( '1' ) }}</code>
        <br> <i>It is ideal for use with the <b>app.month_array</b> and <b>app.month_o_array</b> objects</i>
    </div>

        <!--unique-->
    <hr> 
    <div class="section">   
         <h5 style="color:gray">
                <u>app.unique</u> /<u>app.removeDuplicates</u> / <u>app.remove_duplicates</u> <i>(Function (Array) )</i>
        </h5>
        Returns an array with no duplicate values. To remove duplicates in the Array <code> [ "Apple","Apple","Banana","Rice","Beans","Apple","Mango","Beans","Banana" ] </code>,  run:
        <pre style="max-width:800px;">&#123; &#123; app.unique(  [ "Apple","Apple","Banana","Rice","Beans","Apple","Mango","Beans","Banana" ]  ) &#125; &#125;</pre>
        Returns <code>{{ app.unique( [ "Apple","Apple","Banana","Rice","Beans","Apple","Mango","Beans","Banana" ] ) }}</code>
    </div>

    <!--count-->
    <hr> 
    <div class="section">   
         <h5 style="color:gray">
                <u>app.count</u>  <i>(Function (value_to_search_for, Array_to_search) )</i>
        </h5>
        Returns the number of instances of an object/element in an array. E.g 
        <br>To find the total number of occurences of <b><i>"Apple"</i></b> in <code>[ "Apple","Apple","Banana","Rice","Beans","Apple","Mango","Beans","Banana" ]</code>, run:
        <pre style="max-width:800px;">&#123; &#123; app.count( "Apple", [ "Apple","Apple","Banana","Rice","Beans","Apple","Mango","Beans","Banana" ]  ) &#125; &#125;</pre>
        which returns <code>{{app.count( "Apple", [ "Apple","Apple","Banana","Rice","Beans","Apple","Mango","Beans","Banana" ]  )}}</code>
        <br><h5>Multiple Item search</h5>
        <br>You can also search for multiple terms provided they are specified as an Array. e.g To find the number of references to <i><b>Apple, Banana, Nanasi</b></i> and <i><b>Beans</b></i> that occurs in the Array <code> [ "Apple","Apple","Banana","Rice","Beans","Apple","Mango","Beans","Banana" ] </code>,  run:
        <pre style="max-width:1000px;">&#123; &#123; app.count( ["Apple","Banana","Nanasi","Beans"], [ "Apple","Apple","Banana","Rice","Beans","Apple","Mango","Beans","Banana" ]  ) &#125; &#125;</pre>
        Which returns <code>{{ app.count( ["Apple","Banana","Nanasi","Beans"], [ "Apple","Apple","Banana","Rice","Beans","Apple","Mango","Beans","Banana" ] ) }}</code>
    </div>

    <!--post-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u>app.post</u> <i>(Promise ( target_url, data) )</i>
        </h5>
        Returns a then-able after performing a http request guided by the provided parameters.
        <br>To make an http <i>POST</i> request to <i><b>{{remoteAuth.url}}/echo</b></i> where the parameters are <i><b>service=demo, time={{app.date()}}</b></i> and <i><b>status=200</b></i>, run
        <pre style="max-width:1200px;">&#123; &#123; app.post('{{remoteAuth.url}}/echo',{ service: "demo", time : {{app.date()}} , status : 200 }).then(app.handler).catch(app.handler) &#125; &#125;</pre>
        <button 
            class="md-btn md-btn-primary" 
            ng-click=" app.post(remoteAuth.url+'/echo',{ service: 'demo', time : app.date() , status : 200 }).then(app.handler).catch(app.handler)"
        >APP.post REQUEST</button>
    </div>

    <!--get-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u>app.get</u> <i>(Promise ( target_url, data) )</i>
        </h5>
        Returns a then-able after performing a http request guided by the provided parameters.
        <br>To make an http <i>get</i> request to <i><b>{{remoteAuth.url}}/echo</b></i> where the parameters are <i><b>q=framify and status=401</b></i>, run
        <pre style="max-width:1000px;">&#123; &#123; app.get('{{remoteAuth.url}}/echo',{ q: 'framify', status: 401}).then(app.handler).catch(app.handler) &#125; &#125;</pre>
        <button 
            class="md-btn md-btn-primary" 
            ng-click=" app.get(remoteAuth.url+'/echo',{ q: 'framify', status: 401}).then(app.handler).catch(app.handler)"
        >APP.get REQUEST</button>
    </div>

    <!--put-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u>app.put</u> <i>(Promise ( target_url, data) )</i>
        </h5>
        Returns a then-able after performing a http request guided by the provided parameters.
        <br>To make an http <i>put</i> request to <i><b>{{remoteAuth.url}}/echo</b></i> where the parameters are <i><b>q=framify and status=401</b></i>, run
        <pre style="max-width:1000px;">&#123; &#123; app.put('{{remoteAuth.url}}/echo',{ q: 'framify', status: 500}).then(app.handler).catch(app.handler) &#125; &#125;</pre>
        <button 
            class="md-btn md-btn-primary" 
            ng-click=" app.put(remoteAuth.url+'/echo',{ q: 'framify', status: 500}).then(app.handler).catch(app.handler)"
        >APP.put REQUEST</button>
    </div>

    <!--delete-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u>app.delete</u> <i>(Promise ( target_url, data) )</i>
        </h5>
        Returns a then-able after performing a http request guided by the provided parameters.
        <br>To make an http <i>delete</i> request to <i><b>{{remoteAuth.url}}/echo</b></i> where the parameters are <i><b>q=framify and status=401</b></i>, run
        <pre style="max-width:1000px;">&#123; &#123; app.delete('{{remoteAuth.url}}/echo',{ q: 'framify', status: 301}).then(app.handler).catch(app.handler) &#125; &#125;</pre>
        <button 
            class="md-btn md-btn-primary" 
            ng-click=" app.delete(remoteAuth.url+'/echo',{ q: 'framify', status: 301}).then(app.handler).catch(app.handler)"
        >APP.delete REQUEST</button>
    </div>

    <!--db-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u>app.db</u> <i>(Promise ( data, target_url) )</i>
        </h5>
        Performs a request to interact with the framify-db component.
        <br>To query the database, ensure that the database is well configured and that you are loged in as a user ; then run
        <pre style="max-width:1000px;">&#123; &#123; app.db({ command: 'get', table: 'users', specifics: 'id,username' }).then(app.handler).catch(app.handler) &#125; &#125;</pre>
        <button 
            class="md-btn md-btn-primary" 
            ng-click=" app.db({ command: 'get', table: 'users', specifics: 'id,username'' })s.then(app.handler).catch(app.handler)"
        >APP.db REQUEST</button>
    </div>

     <!--handler-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u>app.handler</u> <i>(Function( framify_make_response_object) )</i>
        </h5>
        Creates an alert based on the http status code in the <i><b>response_object.status</b></i> object value
        <br>A sample framify formatted response of  <code>{"response":200, "data": { "message": "Successfully set the parameter", "command": "done" } }</code> can be <i>handled</i> by running:
        <pre style="max-width:1000px;">&#123; &#123; app.handler({"response":200, "data": { "message": "Successfully set the parameter", "command": "done" } }) &#125; &#125;</pre>
        <button 
            class="md-btn md-btn-primary" 
            ng-click="app.handler({'response':200, 'data': { 'message': 'Successfully set the parameter', 'command': 'done' } })"
        >APP.HANDLER EXAMPLE</button>
    </div>

<!-- EO - APP SERVICE -->
</div>


    <!--SMS Service-->
    <hr>
    <div class="section">
        <u><h3>The <i style="color:red;">sms</i> service</h3></u>
    </div>


<!-- SO - SMS SERVICE-->
<div ng-if="false"> 

    <!--start-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u> sms.start</u> <i>(Promise (framify_sms_gateway_server_url) )</i>
        </h5>
        
        Starts the SMS gateway connection
        <br>To start the SMS gateway connection via the official SMS gateway, run
        <pre style="max-width:600px;">&#123; &#123; sms.start( 'http://41.89.162.252:3000' ) &#125; &#125;</pre>
        <br><button class="btn md-btn md-btn-success" ng-click="sms.start( 'http://41.89.162.252:3000' )">START SMS SERVICE</button>
    </div>


    <!--stop-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u> sms.stop</u> <i>(Promise () )</i>
        </h5>
        
        stops the SMS gateway connection
        <br>To stop the SMS gateway connection to an SMS gateway, run
        <pre style="max-width:600px;">&#123; &#123; sms.stop( ) &#125; &#125;</pre>
        <br><button class="btn md-btn md-btn-danger" ng-click="sms.stop( )">STOP SMS SERVICE</button>
    </div>

    <!--SMS-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u> sms.SMS</u> <i>(Promise ( formatted_sms_object ) )</i>
        </h5>
        
        Sends an already formatted SMS object.
        <br>The  format required is <code>{ "telephone": "087987986", "message": "Hello Stranger", "password": "Your device's FRAMIFY SMS Authentication Key" }</code>, e.g:
        <pre style="max-width:600px;">&#123; &#123; sms.SMS( { "telephone": "087987986", "message": "Hello Stranger", "password": "3*5************" } ) &#125; &#125;</pre>
    </div>

    <!--oneSMS-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u> sms.oneSMS</u> <i>(Promise ( recipient_telephone ,message ,client_authentication_key ) )</i>
        </h5>
        
        Sends a single SMS message.
        <br>To send an SMS message <i>(after establishing a connection to the gateway)</i>, run:
        <pre style="max-width:600px;">&#123; &#123; sms.oneSMS(  "087987986", "Hello Stranger", "3*5************"  ) &#125; &#125;</pre>
    </div>

    <!--bulkSMS-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u> sms.bulkSMS</u> <i>(Promise ( recipients_telephone_array ,message ,client_authentication_key ) )</i>
        </h5>
        
        Sends an SMS String to multiple users.
        <br>To send an SMS message <i>(after establishing a connection to the gateway)</i>, run:
        <pre style="max-width:600px;">&#123; &#123; sms.bulkSMS(  ["087987986","0324243686"], "Hello Stranger", "3*5************"  ) &#125; &#125;</pre>
    </div>

<!-- EO - SMS SERVICE -->
</div>
    


    <!--db-->
    <hr>
    <div class="section">   
       
        <h5 style="color:gray">
                <u>app.db</u> <i>(Promise ( data, target_url) )</i>
        </h5>
        Performs a request to interact with the framify-db component.
        <br>To query the database, ensure that the database is well configured and that you are loged in as a user ; then run
        <pre style="max-width:1000px;">&#123; &#123; app.db({ command: 'get', table: 'users', specifics: 'id,username' }).then(app.handler).catch(app.handler) &#125; &#125;</pre>
        <button 
            class="md-btn md-btn-primary" 
            ng-click=" app.db({ 'command': 'get', 'table': 'users', 'specifics': 'id,username' }).then(app.handler).catch(app.handler)"
        >APP.db REQUEST</button>
    </div>


    <pre style="background-color:black;color:white;">

//@ The BASIC sms sending application service
.service("sms" 
,['app'
,function(app) {

        

        /**
         * This angular service allows for you to easily send SMS messages conveniently using bixbyte's default SMS server
         * 
         * It allows the use of your *Framify SMS* android phone application to send simple SMS messages. 
         * 
         * You can easily extend it as you will since the socket connection to the server can be hooked to as "sms.socket"
         */

        //@ BASIC APPLICATION INITIALIZATION
        this.server = {};
        this.server.host = '41.89.162.252:3000';

        this.socket;

        this.start_sms = ( framify_sms_server_url ) => {



        }
        
        this.socket = io.connect(`${this.server.host}`);

        const socket = this.socket;

        //@ SEND EXPRESS SMS'
        this.SMS = (smsData) => {
            socket.emit("sendSMS" ,smsData);
            return Promise.resolve(true)
            .catch(function(e){
                console.log("Encountered an error when processing the sms function.")
                console.dir(e)
            })            
        };

        //@ SEND A SINGLE SMS
        this.oneSMS = (tel ,mess ,apiKey) => {

            var obj;
            if (Array.isArray(tel)) {
                obj = tel;
            } else {
                obj = {
                    telephone: tel,
                    message: mess,
                    password: apiKey
                };
            }

            socket.emit("sendSMS" ,obj);
            return Promise.resolve(true)
            .catch(function(e){
                console.log("Encountered an error when processing the sendsms function.")
                console.dir(e)
            });

        };

        //@ SEND BULK SMS MESSAGES
        this.bulkSMS = (contacts ,data ,apiKey) => {

            return new Promise( (resolve ,reject) => {

                let obj = [];

                //* Ensure that the API key has been set
                if (!apiKey) {
                    app.alert("<font style='weight:bold;color:red;'>ERROR</font>",'<center>Failed to instantiate the SMS sending service before api Key definition.</center>');
                } else if (Array.isArray(contacts)) {

                    //* handle an array of contacts
                    contacts.forEach( (element) => {

                        if (app.isTelephone(element)) {

                            obj.push({
                                telephone: element,
                                message: data,
                                apiKey: apiKey
                            });

                        } else {

                            app.alert("<font style='weight:bold;color:red;'>Invalid telephone number encountered</font>",'<center>Could not send an SMS message to the invalid number ' + element + '.</center>');

                        }

                    }, this);

                    socket.emit("sendSMS", obj);
                    resolve(true);

                } else {
                    app.alert("<font style='weight:bold;color:red;'>Bulk SMS error.</font>" ,'<center>You can only use the bulk SMS service with an array of telephone contacts</center>');
                }

            });       
           
        };

        // //@ SAMPLE SUCCESSFUL SMS SENDING INFORMATION HANDLER
        // this.socket.on("trueSMS", (data) => {
        //     $scope.app.notify("The message has been conveyed.");
        // });

}])

//@ The basic incomplete networking service
.service("cgi" 
,[
function() {

    //Handle background calls to the web server for database integration
    this.ajax = function(data){
        return $.ajax({
            method: "GET",
            url: "/php",
            data: data
        });
    };

   //Handle the posting of emails via the mailgun api
   this.mail = function(data){
        return $.ajax({
            method: "POST"
            ,url: "/sendMail"
            ,data: data
        })
    };

}])

//@@ The Authentication service
.service('auth'
,[ '$http','$localStorage'
,function($http,$localStorage){

   var auth = this;

   auth.SetAuth     = function( AuthToken ){

        return new Promise( function(resolve,reject){
            
            resolve( $http.defaults.headers.common.Authorization = AuthToken ||  ( $localStorage.framify_user ) ? $localStorage.framify_user.token : undefined );

        });

    };

     //@ Perform User Registration
    auth.Register  = function( credentials ){

        return new Promise( function( resolve,reject ){

            $http.post('/auth/register', credentials )
            .success(function(response){

                if( response.response == 200 ){

                    resolve( response.data.message )

                }else{

                    reject( response.data.message )

                }

            })
            .error(function(response){
                reject( JSON.stringify( ( ( response ) ? ( ( response.data )  ? response.data.message : response ) : response ) || "Could not obtain a response from the server.")  )
            })

        });

    };
        
    //@ Perform a User Login
    auth.Login          = function( credentials ){

        return new Promise( function( resolve,reject ){

            $http.post('/auth/verify', credentials )
            .success(function(response){

                if( response.response == 200 ){

                    $localStorage.framify_user   =  response.data.message ;

                    auth.SetAuth( response.data.message.token );

                    resolve( response.data.message )

                }else{

                    reject( response.data.message )

                }

            })
            .error(function(response){
                reject( JSON.stringify( ( ( response ) ? ( ( response.data )  ? response.data.message : response ) : response ) || "Could not obtain a response from the server.")  )
            })

        });

    };
        
    //@ Perform A User Logout
    auth.Logout         = function( ){

        return new Promise( function(resolve,reject){

            delete $localStorage.framify_user;
            auth.SetAuth(undefined)
            .then(resolve)

        });                         

    };

}])


//@@ The Remote authentication service
//@@ The Authentication service ChartJsProvider.service('auth'
.service('remoteAuth'
,[ '$http','$localStorage'
,function($http,$localStorage){

   var r_auth = this;

   r_auth.url         = 'http://bixbyte.io'

   r_auth.setUrl      = function( accessUrl ){

       return new Promise( (resolve,reject) => {
            
            r_auth.url    = accessUrl;
            console.log(`The remote access url has been set to ${accessUrl}` );
            resolve(accessUrl);

       })
       
   }

   r_auth.SetAuth     = function( AuthToken ){

        return new Promise( function(resolve,reject){
            
            resolve( $http.defaults.headers.common.Authorization = AuthToken ||  ( $localStorage.framify_user ) ? $localStorage.framify_user.token : undefined );

        });

    };

     //@ Perform User Registration
    r_auth.Register  = function( credentials ){

        return new Promise( function( resolve,reject ){

            $http.post(`${r_auth.url}/auth/register`, credentials )
            .success(function(response){

                if( response.response == 200 ){

                    resolve( response.data.message )

                }else{

                    reject( response.data.message )

                }

            })
            .error(function(response){
                reject( JSON.stringify( ( ( response ) ? ( ( response.data )  ? response.data.message : response ) : response ) || "Could not obtain a response from the server.")  )
            })

        });

    };
        
    //@ Perform a User Login
    r_auth.Login          = function( credentials ){

        return new Promise( function( resolve,reject ){

            $http.post(`${r_auth.url}/auth/verify`, credentials )
            .success(function(response){

                if( response.response == 200 ){

                    $localStorage.framify_user   =  response.data.message ;

                    r_auth.SetAuth( response.data.message.token );

                    resolve( response.data.message )

                }else{

                    reject( response.data.message )

                }

            })
            .error(function(response){
                reject( JSON.stringify( ( ( response ) ? ( ( response.data )  ? response.data.message : response ) : response ) || "Could not obtain a response from the server.")  )
            })

        });

    };
        
    //@ Perform A User Logout
    r_auth.Logout         = function( ){

        return new Promise( function(resolve,reject){

            delete $localStorage.framify_user;
            r_auth.SetAuth(undefined)
            .then(resolve)

        });                         

    };

}]) 


.run(
["app" ,"cgi" ,"$rootScope" ,"$state" ,"$localStorage" ,"sms" ,"auth","remoteAuth"
,function(app ,cgi ,$rootScope ,$state ,$localStorage ,sms ,auth, remoteAuth) {

        //! INJECT THE LOCATION SOURCE TO THE ROOT SCOPE
        $rootScope.location     = $state;

        //! INJECT THE $localStorage instance into the root scope
        $rootScope.storage      = $localStorage;

        //! INJECT THE APPLICATION'S MAIN SERVICE TO THE ROOT SCOPE SUCH THAT ALL SCOPES MAY INHERIT IT
        $rootScope.app          = app;

        //! INJECT THE APP BASICS SERVICE
        $rootScope.cgi          = cgi;

        //! SIMPLE APPLICATION BEHAVIOR SETUP
        $rootScope.frame        = {};

        //#! INJECT THE SMS INSTANCE INTO THE MAIN SCOPE
        $rootScope.sms          = sms;

        //@ INJECT THE AUTHENTICATION SERVICE
        $rootScope.auth         = auth;
        $rootScope.remoteAuth   = remoteAuth;

        //! IDENTIFY THE CURRENT PATH
        $rootScope.frame.path   = () => $state.absUrl().split("/#/")[0] + "/#/" + $state.absUrl().split("/#/")[1].split("#")[0];
        //p.split("/#/")[0]+"/#/"+p.split("/#/")[1].split("#")[0]

        //@ INITIALIZE THE STORAGE ADMIN VARIABLE
        $rootScope.storage.admin = {};

        //! RELOCATION HANDLING
        $rootScope.frame.relocate = (loc) => {
            console.log(`Relocating to: #${loc}`)
            $rootScope.location.go(loc);
        };

        //! ADMIN HANDLING  
        $rootScope.frame.is_admin = false;

        //! ADMIN STATUS CHECKER 
        $rootScope.frame.isAdmin = () => ($rootScope.frame.is_admin) ? true : false;

        //! ROOT USER STATUS CHECKER
        $rootScope.frame.isRoot = () => ($rootScope.storage.admin.access == 0) ? true : false;

        //! ADMIN STATUS SWITCH
        $rootScope.frame.changeAdmin = (bool) => {
            $rootScope.frame.is_admin = bool;
            //  $rootScope.$apply();
        };

        //! RESET THE ADMIN STATUS
        $rootScope.frame.reset = () => {
            delete $rootScope.storage.admin;
            delete $rootScope.storage.user;
            $rootScope.storage.admin    = {};
            $rootScope.storage.user     = {};
            $rootScope.frame.changeAdmin(false);
            window.location = "/#/";
        };


    }])



//@ The main controller
.controller("framifyController"
,['$scope' ,'$state' ,'$rootScope','$http' 
,function($scope ,$state ,$rootScope ,$http) {

        //!APPLICATION GLOBAL SCOPE COMPONENTS
        $scope.current = {};
        $scope.ui = {};

        // $scope.urlParams = $stateParams;

        $rootScope.nav = [];
        $rootScope.nav.search; 
        $rootScope.links = [];

        $scope.nav.hasFilters = false;


        //** MANAGE THE NAVIGATION SEARCH STATUS
        $scope.openFilters = (hasFilters) => {
            if (hasFilters === true) { $scope.nav.hasFilters = false; } else { $scope.nav.hasFilters = true; }
        };

        //!RE-INITIALIZE APPLICATION DATA
        $rootScope.app.reinit = () => {
            $scope.location.path("/framify");
        };


        //@ FUNCTION EXECUTOR
        $rootScope.exec = f => f();

        //@ VARIABLE SETTER
        $rootScope.setVar = ( obj, keys, v ) => {

            if( keys.length === 1){
                obj[keys[0]] = v;
            }else{
                var key     = keys.shift();
                obj[key]    = $rootScope.setVar(typeof(obj[key]) === 'undefined' ? {} : obj[key], keys, v);
            }

            return obj;

        };

        /**
         * SECURE THE PARENTAL CONTROLLED URLS
         */
        $rootScope.secure = (securityFunc) => {

            var parts = window.location.href.split('/');

            var part = parts[(parts.length - 1)];

            if ($scope.links.indexOf(part) >= 0) {

                $rootScope.exec(securityFunc);

            }

        };


        /**
         * DATABASE CENTRIC ADDITION AND DELETION
         */

        //Define the main application objects
        $scope.add = {};
        $scope.fetch = {};
        $scope.fetched = {};
        $scope.counted = {};
        $scope.data = {};

        $scope.data.login = {};
        $scope.data.admin = {};

        $rootScope.frame.changeAdmin(false);
        $scope.logedin = false;
         
        //@ Redirect to a given sub-state in the pre-defined 'app' main state
        $scope.appRedirect = function(partialState){
	    $state.go("app."+partialState);
	}
                
        //@ Redirect to the specified state
        $scope.goTo = function(completeState){
            $state.go(completeState);
        }

        //@ UNWANTED ANGULAR JS OBJECTS
        $scope.unwanted    = ["$$hashKey","$index"];

        $scope.removeUnwanted = function( insertObj ){
             Object.keys( insertObj )
             .forEach( insertKey => {
                if( $scope.unwanted .indexOf( insertKey ) != -1 ){
                    insertObj[insertKey] = undefined;
                    delete insertObj[insertKey];
                }
            });
            return insertObj;
        };

       
        
        //! BASIC ADDITION
        $scope.add = (table ,data ,cryptFields ,cb) => {

            return new Promise( (resolve ,reject) => {

                //* populate the data object 
                data                = (data) ? $scope.app.json(data) : {};
                data.command        = "add";
                data.table          = (table != undefined) ? table.toString().replace(/vw_/ig, '') : "";
                data.token          = data.token || $scope.storage.admin._;
                data.extras         = (data) ? ((data.extras) ? data.extras.replace(/LIMIT 1/ig, '') : undefined) : undefined;

                //* Encrypt the specified cryptFields
                 if (cryptFields) {
                    cryptFields.split(",")
                    .forEach((cryptField) => {
                        if(data[cryptField]){
                            data[cryptField] = $scope.app.md5(data[cryptField])
                        }                        
                    });
                }

                //* Perform the actual addition
                $scope.cgi.ajax($scope.removeUnwanted(data))
                .then((r) => {

                    r = $scope.app.json(r);

                    if (r.response == 200) {

                        $scope.app.notify(`<center> ${r.data.message}</center>` ,"success" );

                        $scope.fetch(table, { specifics: data.specifics });

                        $scope.data[table.toString().replace(/vw_/ig, '')] = {};

                        if ( cb && typeof(cb) == "function") {
                            resolve( cb(r,data) );
                        } else {
                            resolve(true);
                        }

                    } else {

                        // POSTGRESQL ERROR FORMAT MATCHING
                        if (Array.isArray(r.data.message)) {

                            var v = r.data.message[2].match(/DETAIL:(.*)/);

                            if (v != undefined || v != null) {
                                r.data.message = v[1];
                            } else {
                                r.data.message = r.data.message[2];
                            }

                        }


                        $scope.app.notify(`<center>${ r.data.message }</center>` ,'danger');
                        reject( $scope.app.makeResponse(500 ,v[1]) )
                        
                    }

                    //$scope.$apply();

                });

            });

        
            
        };

        //! BASIC UPDATING
        $scope.update = (table ,data ,cryptFields ,cb) => {

            return new Promise( (resolve ,reject) => {

                //* pack the relevant info into the data object
                data                = (data) ? $scope.app.json(data) : {};
                data.command        = "update";
                data.table          = (table != undefined) ? table.toString().replace(/vw_/ig, '') : "";
                data.token          = data.token || $scope.storage.admin._;
                data.extras         = (data) ? ((data.extras) ? data.extras.replace(/LIMIT 1/ig, '') : undefined) : undefined;

                //* Encrypt the specified cryptFields
                if (cryptFields) {
                    cryptFields.split(",")
                    .forEach((cryptField) => {
                        if(data[cryptField]){
                            data[cryptField] = $scope.app.md5(data[cryptField])
                        } 
                    });
                }

                //* perform the actual update
                $scope.cgi.ajax($scope.removeUnwanted(data))
                .then( (r) => {

                    r = $scope.app.json(r);

                    if (r.response == 200) {

                        $scope.app.notify(`<center> ${r.data.message}</center>`, "success");

                        $scope.fetch(table, { specifics: data.specifics });

                        $scope.data[table.toString().replace(/vw_/ig, '')] = {};

                        //$scope.$apply();

                        if (typeof(cb) == 'function') {
                            resolve( cb( r ) );                            
                        }else{
                            resolve(true);
                        }

                    } else {

                        // POSTGRESQL ERROR FORMAT MATCHING
                        if (Array.isArray(r.data.message)) {

                            var v = r.data.message[2].match(/DETAIL:(.*)/)

                            if (v != undefined || v != null) {
                                r.data.message = v[1];
                            } else {
                                r.data.message = r.data.message[2];
                            }
                           
                        }

                        $scope.app.notify(`<center>${ r.data.message }</center>`,"danger");
                        reject( $scope.app.makeResponse(500 ,r.data.message)  );

                    }
                    
                })

            });
  
        };


        //! BASIC DATA FETCHING
        var do_fetch = (table ,data ,cryptFields) => {

            return new Promise( (resolve ,reject) => {

                //* populate the "data" object
                data               = (data) ? $scope.app.json(data) : {};
                data.command       = "get";
                data.table         = table;

                console.log("\nprocessing the fetching of table " + table + "\n")

                //* Encrypt the specified cryptFields
                if (cryptFields) {
                    cryptFields.split(",")
                    .forEach((cryptField) => {
                       if(data[cryptField]){
                            data[cryptField] = $scope.app.md5(data[cryptField])
                        } 
                    });
                }

                 //* perform the actual data fetching
                 $scope.cgi.ajax($scope.removeUnwanted(data))
                 .then( (r) => {

                    r = $scope.app.json(r);

                    if (r.response == 200) {
                        $scope.fetched[table] = r.data.message;
                        $scope.$apply();
                        resolve(r);
                    } else {

                        // POSTGRESQL ERROR FORMAT MATCHING
                        if (Array.isArray(r.data.message)) {

                            var v = r.data.message[2].match(/DETAIL:(.*)/)

                            if (v != undefined || v != null) {
                                r.data.message = v[1];
                            } else {
                                r.data.message = r.data.message[2];
                            }

                        }
                        $scope.app.notify(`<center>${ r.data.message }</center>`,"danger");
                        reject( $scope.app.makeResponse(500 ,r.data.message) );

                    }
                    
                })

            });

        };

        $scope.fetch = (table ,data ,cryptFields ,cb) => {

            if (Array.isArray(table)) {

                let promiseArr = new Array();

                table
                .filter(e=>typeof(e[0])!='undefined' )
                .forEach( (tData ,tkey) => {
                    promiseArr.push( do_fetch(tData[0] ,(tData[1] || {}) ) ,cryptFields)
                });
                
                promiseArr = promiseArr.filter(e=>typeof(e)!='undefined');

                return Promise.all( promiseArr );

            } else {
               return Promise.resolve( do_fetch(table, data, cryptFields) )
               .catch(function(e){
                   console.log("Encountered an error when processing the fetch function.")
                   console.dir(e)
               });
            }

        };

        //! BASIC DELETION  
        $scope.del = (table ,data ,cryptFields ,cb) => {

            return new Promise( (reject ,resolve) => {

                //* populate the data object
                data            = (data) ? $scope.app.json(data) : {};
                data.command    = "del";
                data.table      = (table != undefined) ? table.toString().replace(/vw_/ig, '') : "";
                data.token      = data.token || $scope.storage.admin._;

                //* Encrypt the specified cryptFields
                if (cryptFields) {
                    cryptFields.split(",")
                    .forEach((cryptField) => {
                        if(data[cryptField]){
                            data[cryptField] = $scope.app.md5(data[cryptField])
                        } 
                    });
                }

                $scope.cgi.ajax($scope.removeUnwanted(data))
                .then( (r) => {

                    r = $scope.app.json(r);

                    if (r.response == 200) {
                        // // $scope.fetched[table].splice(delID, 1);
                        $scope.app.notify(`<center>${r.data.message}</center>`, "success");
                        $scope.fetch(table);
                        resolve(r);
                    } else {

                        // POSTGRESQL ERROR FORMAT MATCHING
                        if (Array.isArray(r.data.message)) {

                            var v = r.data.message[2].match(/DETAIL:(.*)/)

                            if (v != undefined || v != null) {
                                r.data.message = v[1];
                            } else {
                                r.data.message = r.data.message[2];
                            }
                        }
                        $scope.app.notify(`<center>${ r.data.message }</center>`,"danger");
                        reject( $scope.app.makeResponse(500 ,r.data.message) );

                    }
                    //$scope.$apply();

                })

            })
            
        };

        //Basic User Login
        $scope.login = (cryptField) => {

            return new Promise( (resolve ,reject) => {

                if (cryptField) {
                    $scope.data.login[cryptField] = $scope.app.md5($scope.data.login[cryptField])
                }

                $scope.data.login.command   = "get";
                $scope.data.login.table     = "users";
                $scope.data.login.extras    = " AND active is true LIMIT 1";

                //* perform the actual login validation
                $scope.cgi.ajax($scope.removeUnwanted($scope.data.login))
                .then((r) => {

                    $scope.data.admin.extras = "";

                    r = $scope.app.json(r);

                    if (r.response == 200) {

                        if (r.data.message.length > 0 && typeof(r.data.message[0]) == "object") {

                            if (r.data.message[0]['username'] == $scope.data.login.username) {
                                $scope.storage.user = r.data.message[0];
                                $scope.logedin = true;
                            } else {
                                delete $scope.storage.user;
                                window.location = "/#/";
                            }

                             resolve();

                        } else {
                            delete $scope.storage.user;
                            $scope.app.notify(`<center>You have entered the wrong login credentials.</center>` ,"danger");
                        }

                    } else {

                        // POSTGRESQL ERROR FORMAT MATCHING
                        if (Array.isArray(r.data.message)) {

                            var v = r.data.message[2].match(/DETAIL:(.*)/);

                            if (v != undefined || v != null) {
                                r.data.message = v[1];
                            } else {
                                r.data.message = r.data.message[2];
                            }
                        }

                        delete $scope.storage.user;
                        $scope.app.notify(`<center>${ r.data.message }</center>`,"danger");
                        reject( $scope.app.makeResponse(500 ,r.data.message) );

                    }
                    //$scope.$apply();

                });

            });

        };

        //Basic admin login
        $scope.adminLogin = (cryptField) => {

            return new Promise( (resolve,reject) =>{

                if (cryptField) {
                    $scope.data.admin[cryptField] = $scope.app.md5($scope.data.admin[cryptField])
                }

                $scope.data.admin.command   = "get";
                $scope.data.admin.table     = "admins";
                $scope.data.admin.extras    = " AND active is true LIMIT 1";

                //* perform the actual login
                $scope.cgi.ajax($scope.removeUnwanted($scope.data.admin) )
                .then((r) => {

                    $scope.data.admin.extras = "";

                    r = $scope.app.json(r);

                    if (r.response == 200) {

                        if (r.data.message.length > 0 && typeof(r.data.message[0]) != undefined) {

                            if (r.data.message[0]['password'] === $scope.data.admin.password) {
                                $scope.storage.admin = r.data.message[0];
                                $scope.storage.admin._ = {};
                                $scope.storage.admin._.user = r.data.message[0].admin_name;
                                $scope.storage.admin._.key = r.data.message[0].password;
                                $rootScope.frame.changeAdmin(true);
                                //$scope.$apply();
                                resolve(r)
                            } else {
                                delete $scope.data.admin;
                                delete $scope.storage.admin;
                                $scope.storage.admin    = {};
                                window.location = "/#/admin";                                
                                resolve(r)
                            }

                        } else {
                            delete $scope.data.admin;
                            delete $scope.storage.admin;
                            $scope.storage.admin    = {};
                            $scope.app.notify(`<center>You have entered the wrong login credentials.</center>` ,"danger");
                            window.location = "/#/admin";
                            reject(false);
                        }

                    } else {

                        // POSTGRESQL ERROR FORMAT MATCHING
                        if (Array.isArray(r.data.message)) {

                            var v = r.data.message[2].match(/DETAIL:(.*)/)
                            if (v != undefined || v != null) {
                                r.data.message = v[1];
                            } else {
                                r.data.message = r.data.message[2];
                            }
                        }
                        delete $scope.storage.admin;
                        $scope.storage.admin    = {};
                        $scope.app.notify(`<center>${ r.data.message }</center>`,"danger");
                        reject( $scope.app.makeResponse(500 ,r.data.message) );

                    }
                    //$scope.$apply();
                })

            });

        };

        //@ Handle basic user re-authentication
        $scope.islogedin = () => {

            return new Promise( (resolve ,reject) => {

                if ($scope.storage.user) {
                    $scope.data.login.username = $scope.storage.user.username;
                    $scope.data.login.password = $scope.storage.user.password;
                    $scope.login();
                    resolve(true);
                }else{
                    $scope.app.notify(`<center>You have no permission to access this content</center>`,'danger')
                    reject(false);
                }

            })

        };

        //@ Handle basic app-user logout
        $scope.logout = () => {

            $scope.islogedin = false;
            delete $scope.storage.user;
            window.location = '/#/';
            return Promise.resolve(true)
            .catch(function(e){
                console.log("Encountered an error when processing the logout function.")
                console.dir(e)
            });
            
        };

        //@ Handle basic application redirection
        $scope.redirect = (loc) => {
            if (loc) {
                window.location = loc
            } else {
                window.location = "/#/framify";
            }
            return Promise.resolve(true)
            .catch(function(e){
                console.log("Encountered an error when processing the redirect function.")
                console.dir(e)
            })
        };

        // Basic Admin Auth
        $scope.authorize = () => {

            if ($scope.storage.admin && $scope.data.admin.admin_name && $scope.data.admin.password) {
                $scope.data.admin               = {};
                $scope.data.admin.admin_name    = $scope.storage.admin.admin_name;
                $scope.data.admin.password      = $scope.storage.admin.password;
                $scope.adminLogin();
            } else {
                $scope.location = "/#/admin";
            }

            return Promise.resolve(true)
            .catch(function(e){
                console.log("Encountered an error when processing the authorize function.")
                console.dir(e)
            });

        };

        //@ HANDLE ADMINISTRATOR DEAUTHORIZATION
        $scope.deauthorize = () => {
            delete $scope.storage.admin;
            $rootScope.frame.changeAdmin(false);
            window.location = '/#/';
            return Promise.resolve(true)
            .catch(function(e){
                console.log("Encountered an error when processing the deauthorize function.")
                console.dir(e)
            });
        };


        // BASIC Custom Queries
        $scope.custom = (table ,data ,cryptFields ,cb) => {

            return new Promise( (resolve,reject) => {

                //* initialize the data object
                data            = (data) ? $scope.app.json(data) : {};
                data.command    = "custom";
                data.token      = data.token || $scope.storage.admin._;

                //* Encrypt the specified cryptFields
                if (cryptFields) {
                    cryptFields.split(",")
                    .forEach((cryptField) => {
                        if(data[cryptField]){
                            data[cryptField] = $scope.app.md5(data[cryptField])
                        } 
                    });
                }

                //* Perform the actual custom query
                $scope.cgi.ajax($scope.removeUnwanted(data))
                .then((r) => {

                    r = $scope.app.json(r);

                    if (r.response == 200) {

                        $scope.app.notify(`<center>${(r.data.message || 'Successful')}</center>`, "success");

                        $scope.cFetched[table] = r.data.message;
                        $scope.data[table.toString().replace(/vw_/ig, '')] = {};
                        //$scope.$apply();

                        resolve(r);

                    } else {

                        // POSTGRESQL ERROR FORMAT MATCHING
                        if (Array.isArray(r.data.message)) {

                            var v = r.data.message[2].match(/DETAIL:(.*)/)
                            if (v != undefined || v != null) {
                                r.data.message = v[1];
                            } else {
                                r.data.message = r.data.message[2];
                            }

                        } 
                        $scope.app.notify(`<center>${ r.data.message }</center>`);
                        reject( $scope.app.makeResponse(500, r.data.message) )
                    }
                    //$scope.$apply();
                })

            });   

        };

        //BASIC DATABASE INSTANCEOF COUNTER
        $scope.count = (table ,data ,cryptFields ,cb) => {

            return new Promise( (resolve ,reject) => {

                data            = (data) ? $scope.app.json(data) : {};
                data.table      = table;
                data.command    = "count";
                data.token      = data.token || {};

                //* Encrypt the specified cryptFields
                if (cryptFields) {
                    cryptFields.split(",")
                    .forEach((cryptField) => {
                        if(data[cryptField]){
                            data[cryptField] = $scope.app.md5(data[cryptField])
                        } 
                    });
                }

                //* perform the actual count
                $scope.cgi.ajax($scope.removeUnwanted(data))
                .then((r) => {

                    r = $scope.app.json(r);

                    if (r.response == 200) {

                        $scope.counted[table.toString().replace(/vw_/ig, '')] = r.data.message;
                        $scope.data[table.toString().replace(/vw_/ig, '')] = {};

                        //$scope.$apply();

                        resolve(r);

                    } else {

                        // POSTGRESQL ERROR FORMAT MATCHING
                        if (Array.isArray(r.data.message)) {
                            var v = r.data.message[2].match(/DETAIL:(.*)/)
                            if (v != undefined || v != null) {
                                r.data.message = v[1];
                            } else {
                                r.data.message = r.data.message[2];
                            }
                        }
                        $scope.app.notify(`<center>${ r.data.message }</center>` ,'danger');
                        reject( $scope.app.makeResponse(500 ,r.data.message ) );
                    }
                    //$scope.$apply();
                })

            });

        };

        /**
         * TABLE SORTER
         */
        $scope.sort = function(keyname) {
            $scope.sortKey = keyname; //set the sortKey to the param passed
            $scope.reverse = !$scope.reverse; //if true make it false and vice versa
        }


        /**
         *  DELETE UNWANTED FIELDS
         */
        $scope.sanitize = (data ,keys) => {
            if (keys) {
                keys.split(",").forEach((key) => {
                    delete data[key];
                });
                return Promise.resolve(data)
                .catch(function(e){
                   console.log("Encountered an error when processing the sanitize function.")
                   console.dir(e)
               });
            }
        };

        /**
         * PUSH DATA TO OBJECT
         */
        $scope.dPush = (obj ,key ,val) => {
            obj[key] = val;
        };

        /**
         * @ MONTH REGULATION
         */
        $scope.currmoin = $scope.app.monthNum();
        $scope.setMoin = (moin) => { $scope.currmoin = moin; }

        //@ DELETE UNWANTED PARAMETERS
        $scope.delParams = function( mainObj,removeKeys ){
            // $scope.app.clone
            mainObj     = (mainObj) || {};
            removeKeys  = ( removeKeys ) ? removeKeys.split(',') : [];

            removeKeys.forEach(e => {
                mainObj[e] = null;
                delete mainObj[e];
            });

            return mainObj;

        };

        //@ INJECT A STANDARD WHERE "Extras" OBJECT
        // addExtras(data.my_services,{username: storage.user.username},'username:WHERE owner','password,name,email,telephone,account_number,entity,active'),' ' )
        $scope.addExtras = (targetObj ,extrasObj ,subStrings ,removeKeys) => {

            return new Promise( (resolve,reject) => {

                targetObj   = targetObj || {};
                extrasObj   = extrasObj || {};
                subStrings  = subStrings || '';
                removeKeys  = removeKeys || '';

                var extras  = '';

                var k = [],
                    v = [];

                //@ CAPTURE THE REMOVE KEYS
                removeKeys = removeKeys.split(',').filter(e => e);


                removeKeys.forEach(e => {
                    extrasObj[e] = null;
                    delete extrasObj[e];
                });

                //@ CAPTURE REPLACE STRINGS
                subStrings
                    .split(',')
                    .forEach((e, i) => {
                        let x = e.split(':');
                        k[i] = (x[0]);
                        v[i] = (x[1]);
                    })

                //@ GET THE DEFINED KEYS
                var keys = Object.keys(extrasObj);

                //@ REPLACE THE DEFINED WITH THE DESIRED REPLACE KEYS
                k.forEach((e, i) => {

                    if (keys.indexOf(e) != -1) {

                        extrasObj[v[i]] = extrasObj[e];
                        extrasObj[e] = null;
                        delete extrasObj[e];

                    }

                });


                k = Object.keys(extrasObj);
                v = null;

                k.forEach((e, i) => {

                    var fg = ( !isNaN(extrasObj[e]) ) ? parseInt(extrasObj[e]) : "'" + extrasObj[e] +"'";
                    extras += ' ' + e + "=" + fg + " AND";

                });

                k = null;


                targetObj.extras = extras.replace(/AND+$/, '');

                resolve( targetObj );

            })

        };

        

        ///////////////////////////////////////////////////////////////////////////////////////////////////
        // ADDITIONS ON PROBATION
	// ----

	    //@ LOAD A SERVICE ONTO THE STAGE
	    $scope.service = {};
	    $scope.entity  = {};

	    $scope.showService = (serviceData) => {
		$scope.service.available = true;
		$scope.service.current   = serviceData;
		//$scope.$apply();
	    };

	    $scope.showEntity = (serviceData) => {
		$scope.entity.available = true;
		$scope.entity.current   = serviceData;
		//$scope.$apply();
	    };

	    //@ Count my entities
	    $scope.howMany = (table,data) => {

		var data        = data || {owner: $scope.storage.user.username};
		data            = (data)?$scope.app.json(data):{};
		data.table      = table || 'entities';
		data.command    = "count";
		data.token      =  {};

		$scope.cgi.ajax( $scope.removeUnwanted(data) )
		.then( (r) => {   
		    
		    r = $scope.app.json(r);

		    if(r.response == 200){

		        if( r.data.message ) {
		            $scope.app.notify((r.data.message), "success");
		        }
		        
		        $scope.counted[data.table.toString().replace(/vw_/ig,'')] = r.data.message;
		        
		    }else{

		        //POSTGRESQL MATCHING
		        if(Array.isArray(r.data.message)){
		            var v =  r.data.message[2].match(/DETAIL:(.*)/)
		            if( v != undefined || v!=null ){
		                r.data.message = v[1];
		            }else{
		                r.data.message = r.data.message[2];
		            }
		        }else{
		            r.data.message;
		        }
		    
		        alert(`<center>${ r.data.message }</center>`);
		    }           
		    //$scope.$apply();
		})    


	    };

	// ----

    //@ FRAMIFY HANDLERS

    $scope.data.login       = $scope.data.login || {};

    $scope.data.me          = $scope.data.me || {};

    $scope.setData;

    //@ Initialize the handlers object
    $scope.handlers = {};
    $scope.r_handlers = $scope.handlers;

    //@ The registration success handler
    $scope.handlers.regSuccess = function( message ){
        $scope.app.notify("You have been successfully registered");
        $state.go("app.login");
    };
    $scope.r_handlers.regSuccess = $scope.handlers.regSuccess;

    //@ The successful login handler
    $scope.handlers.loginSuccess = function( message ){
        $scope.app.notify("<i class='fa fa-2x fa-spin fa-circle-o-notch'></i> Processing your login data",'success',4000); 
        $state.go("app.panel");    
    };
    $scope.r_handlers.loginSuccess    = $scope.handlers.loginSuccess;

    //@ The registration error handler
    $scope.handlers.regError   = function( message ){
        $scope.app.alert("<font color='red'>Signup Error</font>", message);
    };
    $scope.r_handlers.regError    = $scope.handlers.regError;

    //@ The login error handler
    $scope.handlers.loginError   = function( message ){
        $scope.app.alert("<font color='red'>Login Error</font>", message);
    };    
    $scope.r_handlers.loginError    = $scope.handlers.loginError;
 
    //@ The identity check verification handler
    $scope.handlers.identity    = function(){

        return new Promise(function(reject,resolve){
            
            $http.get("/auth/me")
            .success(function(response){
               
               resolve( $scope.data.me = response.data.message  );

            })
            .error(function(error){

                $scope.auth.Logout()
                .then(function(){

                    $scope.app.notify("<i class='fa  fa-exclamation-triangle'></i>&nbsp;&nbsp;Your lease has expired <br>Please Login to continue.",'danger');
                    reject( $state.go("app.login") );

                });

            })

        })

    };

    $scope.r_handlers.identity    = function(){

        return new Promise(function(reject,resolve){
            
            console.log("Querying the remote server for identity")

            $http.get(`${$scope.remoteAuth.url}/auth/me`)
            .success(function(response){
               
               console.log("Remote Knows who you are.")
               resolve( $scope.data.me = response.data.message  );

            })
            .error(function(error){

                console.log("Something just didn't go well.")
                $scope.auth.Logout()
                .then(function(){

                    $scope.app.notify("<i class='fa  fa-exclamation-triangle'></i>&nbsp;&nbsp;Your lease has expired <br>Please Login to continue.",'danger');
                    reject( $state.go("app.login") );

                });

            })

        })

    };

    //@ The login status check handler
    $scope.handlers.isLogedIn   = function(){

        return new Promise( function(resolve, reject ){

            if( !$scope.storage.framify_user ){

                console.log("\nNo localstorage value is defined\n")

                if($state.current.name != "app.login" ){

                    console.log("\nRedirecting to the authentication page.\n")

                    $scope.app.notify("<i class='fa  fa-exclamation-triangle'></i>&nbsp;&nbsp;Please Login to continue.",'danger');
                    reject( $state.go("app.login") );                    

                }
                
            }else if( !$http.defaults.headers.common.Authorization || $http.defaults.headers.common.Authorization == undefined || $http.defaults.headers.common.Authorization == '' ){

                    console.log("\nThe authentication header is not yet defined\n")

                    $scope.auth.SetAuth( undefined )
                    .then(function(  ){

                        console.log(`\nThe authentication header has been set to ${$http.defaults.headers.common.Authorization}\n`)

                        if($state.current.name == "app.login" ){
                            resolve( $state.go("app.panel") );
                        }else{
                            resolve(  );
                        }
                        
                    })

                     
                    

            }else{

                console.log("\nAll Looks good! Let me see if I can get you into the party\n")

                if($state.current.name == "app.login" ){
                   resolve( $state.go("app.panel") );
                }else{
                    resolve(  );
                }

            }


        })

    };

    $scope.r_handlers.isLogedIn   = function(){

        return new Promise( function(resolve, reject ){

            console.log("Handing you over to the remote authentication server.")

            if( !$scope.storage.framify_user ){


                if($state.current.name != "app.login" ){

                    $scope.app.notify("<i class='fa  fa-exclamation-triangle'></i>&nbsp;&nbsp;Please Login to continue.",'danger');
                    reject( $state.go("app.login") );                    

                }
                
            }else if( !$http.defaults.headers.common.Authorization || $http.defaults.headers.common.Authorization == undefined || $http.defaults.headers.common.Authorization == '' ){

                    $scope.remoteAuth.SetAuth( undefined )
                    .then(function(  ){

                        if($state.current.name == "app.login" ){
                            resolve( $state.go("app.panel") );
                        }else{
                            resolve(  );
                        }
                        
                    })

                     
                    

            }else{

                if($state.current.name == "app.login" ){
                   resolve( $state.go("app.panel") );
                }else{
                    resolve(  );
                }

            }


        })

    };

}])

.directive("contenteditable"
,function() {
    return {
        restrict: "A",
        require: "ngModel",
        link: function(scope, element, attrs, ngModel) {

            function read() {
                ngModel.$setViewValue(element.html());
            }

            ngModel.$render = function() {
                element.html(ngModel.$viewValue || "");
            };

            element.bind("blur keyup change", function() {
                scope.$apply(read);
            });
        }
    };
})

.directive('fileModel',['$parse',function($parse){
    
    return {
        restrict :"A",
        link : function(scope,element,attr){
            var model       = $parse(attr.fileModel);
            var modelSetter = model.assign;
            element.bind('change', ()=>{
                scope.$apply( ()=>{
                    modelSetter(scope,element[0].files[0])
                })
            })
        }
    }
    
}])

//!CONFIGURE THE BNASIC PRE-RUNTIME STATES OF THE APPLICATION
.config(["ChartJsProvider",function(ChartJsProvider){
    
    //@SET THE DEFAULT CHART COLORS
    ChartJsProvider.setOptions({ colors : [ "#4AB151",'#387EF5', '#FF0000', '#DCDCDC', '#46BFBD', '#FDB45C', '#949FB1', '#4D5360'] });
    // ChartJsProvider.setOptions({ colors : [ '#803690', '#00ADF9', '#DCDCDC', '#46BFBD', '#FDB45C', '#949FB1', '#4D5360'] });

}]);

    </pre>

</div>